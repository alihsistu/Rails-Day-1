## Longest Word Game

Remember your first weeks of Ruby? We only had the terminal for the program user interface. Then we had Sinatra, your first web framework. Now, just like Sinatra, you are using Rails, a web framework, so always remember:

- The program user interface is now your **browser**
- The only way to communicate with your Rails app is through **HTTP requests**

Let's implement a "Longest-word game" with a web-interface!

```bash
rails new rails-longest-word-game
cd rails-longest-word-game
git add .
git commit -m "initial commit"
# [...]
```

## Release 1

Let's think about the UI for our game. What do we need?

1. A page to display the game settings (random letters), with a form for the user to type a word and a button to submit this form.
2. A page receiving this form, computing the user score and displaying it.

### 1.1 - Routing & Controller

Using the terminal command, generate the `GamesController` with two actions `new` and `score`. The `new` action will be used to display a new random grid and a form. The form will be submitted (with `POST`) to the `score` action.

Open you `routes.rb` file and tweak the routes automatically generated by the previous command. In the end, `rails routes` should return something like this:

```bash
Prefix Verb URI Pattern      Controller#Action
   new GET  /new(.:format)   games#new
 score POST /score(.:format) games#score
```

### 1.2 - Generating a new game

Have a look at your old Ruby code. How did you generate an `Array` of random letters? In the `new` action of the `GamesController`, create a new `@letters` instance variable storing these random letters from the alphabet. Then display it in the view. You should get something like this:

![](https://raw.githubusercontent.com/MedetaiAkaru/fullstack-images/master/rails/longest-word-game/new_game.png)

### 1.3 - Submitting a word

We need to add a form below the letters so that the user can fill a suggestion and submit it.

Go ahead and add a form to your view, using `form_tag`. It should `POST` to the `/score` action in the `GamesController`.

Note: If you did not use `form_tag` and used `<form>` then you will find that you will encounter an `Invalid Authenticity Token` error.


![](https://raw.githubusercontent.com/MedetaiAkaru/fullstack-images/master/rails/longest-word-game/new_game_with_form.png)

### 1.4 - The controller

In the controller, we will need to get the submitted word by inspecting `params`. You can do this by `byebug` in your controller code:

```ruby
# app/controllers/games_controller.rb

# [...]
  def score
    byebug
  end
```

Go to the `/new` page, fill a word and submit the form. Look at your terminal - it should be in byebug mode. You can type `params` to inspect what got sent. If it did not trigger, this means something is wrong in your form (probably the `action` or `method`).

### 1.5 - Computing the score

Time to implement the `GamesController#score` logic. Do we have all the information at hand? What do we need? Do we need to pass more information through the `POST` request? Have a look at [`hidden_field_tag`](https://edgeapi.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-hidden_field_tag).

We want to handle three scenarios:

1. The word can't be built out of the original grid
2. The word is valid according to the grid, but is not a valid English word
3. The word is valid according to the grid and is an English word

(You can use [the Recode Dictionary API](https://recode-dictionary.herokuapp.com/) to check if a word is valid.)

At the bottom of the results, add a `link_to` to go back to the New game page.

![](https://raw.githubusercontent.com/MedetaiAkaru/fullstack-images/master/rails/longest-word-game/cant_be_built.png)

![](https://raw.githubusercontent.com/MedetaiAkaru/fullstack-images/master/rails/longest-word-game/not_english_word.png)

![](https://raw.githubusercontent.com/MedetaiAkaru/fullstack-images/master/rails/longest-word-game/congrats.png)